{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../App.svelte",
    "../../Scrubber.svelte"
  ],
  "sourcesContent": [
    "<link href='https://api.mapbox.com/mapbox-gl-js/v1.8.1/mapbox-gl.css' rel='stylesheet' />\n\n<script>\n  import { onMount } from 'svelte';\n  import mapboxgl from 'mapbox-gl';\n  import { stations } from './stations.js';\n  import { allcontours } from './allcontours.js'\n  import Scrubber from './Scrubber.svelte' \n\n  const UB_COORDINATES = [106.900354, 47.917802];\n  const MAPBOX_TOKEN = 'pk.eyJ1IjoiaGF5bGV5c3RhcnIiLCJhIjoiY2s5MmhvYTU3MDBkaTNwcGI3cWJtMjdkcCJ9.tOfFfs9wWWcOfQ1sDMiwvQ';\n  mapboxgl.accessToken = MAPBOX_TOKEN;\n  const FRAME_RATE = 100; // wait ms before changing frames\n\n  let map;\n  let nFrames = 431; // total number of frames in animation\n  let currentFrame = 1;\n  let animationPaused = true;\n\n  let incrementFrame = function() {\n    if (animationPaused) return;\n    if (currentFrame+1 == nFrames) {\n      currentFrame = 1;\n    } else {\n      currentFrame++;\n    }\n    map.setFilter('ap_contours', ['==', 'idx', \"\"+currentFrame]); // frame id is a string\n  }\n\n  const pauseAnimation = () => {\n    animationPaused = true;\n  }\n\n  const startAnimation = () => {\n    animationPaused = false;\n  }\n\n  const updateCurrentFrame = (frame) => {\n    currentFrame = frame;\n  }\n\n\n  // After the DOM has been rendered set up the mapbox. (Won't work before map html is available.)\n\tonMount(async () => {\n\t\tmap = new mapboxgl.Map({\n        container: 'map',\n        style: 'mapbox://styles/mapbox/streets-v9',\n        center: UB_COORDINATES, // starting position\n        zoom: 11 // starting zoom\n      });\n    \n    \n    map.on('load', function() { // what to do when the map is first loaded on the page\n      addInterpolationLayer();\n    });\n\n    var intervalTimer = setInterval(incrementFrame, FRAME_RATE);\n  });\n\n  const addInterpolationLayer = () => {\n    map.addSource('ap_contours', {\n        type: 'vector',\n        url: 'mapbox://hayleystarr.05bkeyzu'\n      });\n\n      map.addLayer({\n        \"id\": \"ap_contours\",\n        \"type\": \"fill\",\n        \"source\": \"ap_contours\",\n        \"source-layer\": \"apcontours\",\n        \"filter\": [\"==\", \"idx\", \"1\"], // frameID is a string :(\n        'layout': {\n            \"visibility\": \"visible\"\n        },\n        paint: {\n          'fill-opacity': 0.2,\n          'fill-color': [\n            \"step\",\n            [\"get\", \"value\"],\n            \"hsl(0, 0%, 100%)\", 8,\n            \"hsl(202, 88%, 51%)\", 18,\n            \"hsl(194, 88%, 51%)\", 36,\n            \"hsl(185, 88%, 51%)\", 54,\n            \"hsl(177, 96%, 53%)\", 72,\n            \"hsl(157, 96%, 53%)\", 90,\n            \"hsl(101, 94%, 65%)\", 108,\n            \"hsl(60, 100%, 49%)\", 126,\n            \"hsl(43, 100%, 49%)\", 144,\n            \"hsl(26, 100%, 49%)\", 162,\n            \"hsl(10, 100%, 49%)\", 180,\n            \"hsl(0, 64%, 43%)\", 198,\n            \"hsl(326, 47%, 29%)\", 216,\n            \"hsl(274, 47%, 29%)\", 234,\n            \"hsl(246, 56%, 35%)\"\n        ]}\n      });\n  }\n\n\n</script>\n\n\n<div class='ub-ap-viz'>\n  <div class='header'>\n    <div class='title'>\n    <span>Visualzing Air Pollution in Ulaanbaatar: {currentFrame} </span>\n    </div>\n  </div>\n  <div class='visualizations'>\n    <div id='map' class='map'></div>\n    <div class='map-legend'>\n    </div>\n  </div>\n  <Scrubber \n      currentFrame={currentFrame}\n      pauseAnimation={pauseAnimation} \n      startAnimation={startAnimation} \n      updateCurrentFrame={updateCurrentFrame}/>\n\n</div>\n\n<style>\n\n.ub-ap-viz {\n  border: 4px solid aquamarine;\n}\n\n\n\n/* HEADER STYLES */\n\n.header {\n  display: flex;\n  flex-direction: column;\n  border: 2px solid red;\n}\n\n.header .title {\n  border: 1px solid pink;\n}\n\n\n/* VISUALIZATION STYLES */\n\n.visualizations {\n  display: flex;\n  height: 500px;\n}\n\n.visualizations .map {\n  width: 70%;\n  height: 100%;\n  flex-grow: 3;\n\n  border: 1px solid orangered;\n}\n\n</style>",
    "<script>\n    import { onMount } from 'svelte';\n    import { styler, value, pointer, listen, transform, easing } from 'popmotion';\n\n    export let currentFrame;\n    export let pauseAnimation;\n    export let startAnimation;\n\n    const maxScrubberWidth = 300;// width of scrubber in px\n    let handleStyler;\n\n    $: {\n       handleStyler && handleStyler.set('x', currentFrame);\n    }\n\n    onMount(async () => {\n        const handle = document.querySelector('.handle-hit-area');\n        handleStyler = styler(handle);\n        const handleX = value(0, (newX) => {\n            handleStyler.set('x', newX);\n        });\n    \n        // const range = document.querySelector('.range');\n\n        const pointerX = (x) => pointer({ x }).pipe(xy => xy.x, transform.clamp(0, maxScrubberWidth));\n\n        let pointerTracker;\n\n        const startDrag = () => {\n            pauseAnimation();\n            pointerX(handleX.get()).start(handleX);\n        };\n    \n        const stopDrag = () => {\n            handleX.stop();\n            //currentFrame = handleStyler.get('x');\n           startAnimation();\n        };\n\n        listen(handle, 'mousedown touchstart').start(startDrag);\n        listen(document, 'mouseup touchend').start(stopDrag);\n    });\n\n</script> \n\n\n<div class='scrubber'>\n    <button on:click={startAnimation}>Start</button>\n    <button on:click={pauseAnimation}>Pause</button>\n    <div class=\"slider\">\n        <div class=\"range\"></div>\n        <div class=\"handle-container\">\n            <div class=\"handle-hit-area\">\n            <div class=\"handle\"></div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<style>\n    .slider {\n    width: 300px;\n    height: 100px;\n    position: relative;\n    }\n\n    .range {\n        border-radius: 3px;\n        height: 6px;\n        background: grey;\n        position: absolute;\n        top: 50%;\n        left: 0;\n        right: 0;\n        transform: translateY(-50%);\n    }\n\n    .handle-container {\n        position: absolute;\n        width: 20 + (30 * 2);\n        height: 30 + (30 * 2);\n        top: 50%;\n        left: 0%;\n        transform: translateY(-50%) translateX(-50%);\n    }\n\n    .handle-hit-area {\n        padding: 30px;\n        width: 20px;\n        height: 20px;\n    }\n\n    .handle {\n        background: red;\n        border-radius: 50%;\n        width: 20px; \n        height: 20px;\n        cursor: pointer;\n    }\n\n\n</style>\n\n"
  ],
  "names": [],
  "mappings": "AA2HA,UAAU,4BAAC,CAAC,AACV,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,UAAU,AAC9B,CAAC,AAMD,OAAO,4BAAC,CAAC,AACP,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,GAAG,AACvB,CAAC,AAED,qBAAO,CAAC,MAAM,cAAC,CAAC,AACd,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,AACxB,CAAC,AAKD,eAAe,4BAAC,CAAC,AACf,OAAO,CAAE,IAAI,CACb,MAAM,CAAE,KAAK,AACf,CAAC,AAED,6BAAe,CAAC,IAAI,cAAC,CAAC,AACpB,KAAK,CAAE,GAAG,CACV,MAAM,CAAE,IAAI,CACZ,SAAS,CAAE,CAAC,CAEZ,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,SAAS,AAC7B,CAAC;AC/FG,OAAO,eAAC,CAAC,AACT,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,KAAK,CACb,QAAQ,CAAE,QAAQ,AAClB,CAAC,AAED,MAAM,eAAC,CAAC,AACJ,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,GAAG,CACX,UAAU,CAAE,IAAI,CAChB,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,GAAG,CACR,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,CAAC,CACR,SAAS,CAAE,WAAW,IAAI,CAAC,AAC/B,CAAC,AAED,iBAAiB,eAAC,CAAC,AACf,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CACpB,MAAM,CAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CACrB,GAAG,CAAE,GAAG,CACR,IAAI,CAAE,EAAE,CACR,SAAS,CAAE,WAAW,IAAI,CAAC,CAAC,WAAW,IAAI,CAAC,AAChD,CAAC,AAED,gBAAgB,eAAC,CAAC,AACd,OAAO,CAAE,IAAI,CACb,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AAChB,CAAC,AAED,OAAO,eAAC,CAAC,AACL,UAAU,CAAE,GAAG,CACf,aAAa,CAAE,GAAG,CAClB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,MAAM,CAAE,OAAO,AACnB,CAAC"
}